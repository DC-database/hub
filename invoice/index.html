<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<title>INVOICE MANAGEMENT SYSTEM</title>
<link href="styles.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<link href="manifest.json" rel="manifest"/>
</head>
<body>
<!-- Mobile Menu -->
<div class="mobile-menu-btn" onclick="toggleMobileMenu()">
<i class="fas fa-bars"></i>
</div>
<div class="mobile-menu" id="mobileMenu">
<div class="menu-header">
<h3>Menu</h3>
<span class="close-menu" onclick="toggleMobileMenu()">×</span>
</div>
<div class="menu-item main-page active" onclick="showSection('mainPageSection')">
<i class="fas fa-home"></i> <span class="menu-text">Main Dashboard</span>
</div>
<div class="menu-item" onclick="showSection('invoiceSection')">
<i class="fas fa-file-invoice"></i> <span class="menu-text">Invoice Status Tracker</span>
</div>
<div class="menu-item" onclick="window.open('https://dc-database.github.io/IPC/', '_blank')">
<i class="fas fa-database"></i> <span class="menu-text">IPC Records</span>
</div>
<div class="menu-item" onclick="window.open('https://ibaport.site', '_blank')">
<i class="fas fa-globe"></i> <span class="menu-text">Main Hub</span>
</div><div class="menu-item admin" onclick="showSection('dataManagementSection')">
<i class="fas fa-database"></i> <span class="menu-text">Data Management</span>
</div>
<!-- Data Controls Section -->
<div class="menu-data-info">
<div class="year-selector">
<label class="year-option">
<input checked="" name="dataSource" type="radio" value="2025"/>
<span class="year-text">2025 Data</span>
</label>
<label class="year-option">
<input name="dataSource" type="radio" value="2022-2024"/>
<span class="year-text">2022-2024 Data</span>
</label>
</div>
<button class="btn btn-primary" id="connectBtn">
<i class="fas fa-sync-alt"></i>
<span class="btn-text">Refresh Data</span>
</button>
<div class="connection-status">
<span class="status-indicator disconnected" id="statusIndicator"></span>
<span id="connectionStatus">Not connected to data source</span>
</div>
<div class="storage-info" id="fileInfo"></div>
</div>
</div>
<div class="container">
<!-- Main Dashboard Section -->
<div class="content-section active" id="mainPageSection">
<h1>INVOICE PROGRESSION (SITE &amp; HO)</h1>
<div class="overdue-cards-container">
<div class="overdue-card srv" onclick="filterSiteRecords('For SRV')">
<div class="overdue-icon"><i class="fas fa-file-invoice"></i></div>
<div class="overdue-content">
<div class="overdue-title">Overdue SRV</div>
<div class="overdue-count" id="overdueSRVCount">0</div>
<div class="overdue-subtitle">(more than a week)</div>
</div>
</div>
<div class="overdue-card ipc" onclick="filterSiteRecords('For IPC')">
<div class="overdue-icon"><i class="fas fa-file-invoice-dollar"></i></div>
<div class="overdue-content">
<div class="overdue-title">Overdue IPC</div>
<div class="overdue-count" id="overdueIPCCount">0</div>
<div class="overdue-subtitle">(more than a week)</div>
</div>
</div>
</div>
<div class="search-container">
<input autocomplete="off" class="search-input" id="siteSearchTerm" list="siteSuggestionsMain" placeholder="Search by site..." type="text"/>
<datalist id="siteSuggestionsMain"></datalist>
<button class="btn btn-primary search-btn" onclick="searchSiteRecords()">
<i class="fas fa-search"></i> <span class="btn-text">Search</span>
</button>
<button class="btn clear-search-btn" onclick="clearSiteSearch()">
<i class="fas fa-times"></i>
</button>
</div>
<div class="charts-container">
<div class="chart-box">
<canvas id="statusPieChart"></canvas>
</div>
<div class="chart-box">
<canvas id="statusBarChart"></canvas>
</div>
<div class="chart-box full-width">
<canvas id="overdueBarChart"></canvas>
</div>
</div>
<div class="dashboard-actions">
<button class="btn btn-primary" onclick="printSelectedDashboardResults()">
<i class="fas fa-print"></i> <span class="btn-text">Print Selected</span>
</button>
<button class="btn btn-primary" onclick="viewSelectedInTracker()">
<i class="fas fa-eye"></i> <span class="btn-text">View Selected</span>
</button>
<!-- Add this new button -->
<button class="btn btn-primary" onclick="addToCollection()">
<i class="fas fa-plus"></i> <span class="btn-text">Add to Collection</span>
</button>
<button class="btn btn-primary" onclick="viewCollection()">
<i class="fas fa-list"></i> <span class="btn-text">View Collection</span>
</button>
</div>
<div class="table-responsive">
<table id="siteRecordsTable">
<thead>
<tr>
<th><input id="selectAllCheckbox" onclick="toggleSelectAll(this)" type="checkbox"/></th>
<th>ID</th>
<th>Release Date</th>
<th>Site</th>
<th>PO</th>
<th>Vendor</th>
<th>Invoice</th>
<th>Amount</th>
<th>Status</th>
<th>Note</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
<!-- Invoice Management Section -->
<div class="content-section" id="invoiceSection">
<div class="section-header">
<h1>INVOICE STATUS TRACKER</h1>
<div class="section-actions">
<button class="btn btn-primary back-btn" onclick="showSection('mainPageSection')" style="display:none;">
<i class="fas fa-arrow-left"></i> <span class="btn-text">Back</span>
</button>
<button class="btn btn-primary" onclick="addToCollectionFromTracker()">
<i class="fas fa-plus"></i> <span class="btn-text">Add to Collection</span>
</button>
<button class="btn btn-primary" onclick="viewCollection()">
<i class="fas fa-list"></i> <span class="btn-text">View Collection</span>
</button>
</div>
</div>
<div class="search-container">
<input class="search-input" id="searchTerm" placeholder="Search..." required="" type="text"/>
<button class="btn btn-primary search-btn" onclick="searchRecords()">
<i class="fas fa-search"></i> <span class="btn-text">Search</span>
</button>
<button class="btn clear-search-btn" onclick="clearSearch()">
<i class="fas fa-times"></i>
</button>
<input class="date-input" id="releaseDateFilter" onblur="(this.type='text')" onfocus="(this.type='date')" placeholder="Date" type="text"/>
<button class="btn clear-date-btn" onclick="clearDate()">
<i class="fas fa-times"></i>
</button>
<button class="btn btn-success help-btn" onclick="contactAboutMissingData()">
<i class="fab fa-whatsapp"></i>
</button>
</div>
<div class="filter-dropdown">
<button class="filter-dropbtn" onclick="toggleFilterDropdown()">
<i class="fas fa-filter"></i> <span class="filter-text">Filter</span>
</button>
<div class="filter-dropdown-content" id="filterDropdown">
<div class="filter-btn active" onclick="filterRecords('all')">All</div>
<div class="filter-btn" onclick="filterRecords('Open')">Open</div>
<div class="filter-btn" onclick="filterRecords('Pending')">Pending</div>
<div class="filter-btn" onclick="filterRecords('No Invoice')">No INV</div>
<div class="filter-btn" onclick="filterRecords('For SRV')">SRV</div>
<div class="filter-btn" onclick="filterRecords('For IPC')">IPC</div>
<div class="filter-btn" onclick="filterRecords('Report')">Report</div>
<div class="filter-btn" onclick="filterRecords('Under Review')">Review</div>
<div class="filter-btn" onclick="filterRecords('CEO Approval')">CEO</div>
<div class="filter-btn" onclick="filterRecords('With Accounts')">Accounts</div>
</div>
</div>
<div class="table-responsive">
<table id="recordsTable" style="display: none;">
<thead>
<tr>
<th>ID</th>
<th>Date</th>
<th>Site</th>
<th>PO</th>
<th>Vendor</th>
<th>Invoice</th>
<th>Amount</th>
<th>Release</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
<!-- Statement of Account Section -->
<div class="content-section" id="statementSection">
<div class="section-header">
<h1>Statement of Account</h1>
<button class="btn btn-primary back-btn" onclick="showSection('invoiceSection')" style="display:none;">
<i class="fas fa-arrow-left"></i> <span class="btn-text">Back</span>
</button>
</div>
<div class="report-controls">
<select class="report-select" id="reportType">
<option value="po">PO Number</option>
<option value="vendor">Vendor</option>
<option value="site">Site</option>
</select>
<input class="report-input" id="reportSearchTerm" list="vendorSuggestions" placeholder="Search term..." type="text"/>
<datalist id="vendorSuggestions"></datalist>
<datalist id="siteSuggestions"></datalist>
<select class="status-select" id="reportStatusFilter">
<option value="all">All Statuses</option>
<option value="Open">Open</option>
<option value="Pending">Pending</option>
<option value="No Invoice">No INV</option>
<option value="For SRV">SRV</option>
<option value="For IPC">IPC</option>
<option value="Report">Report</option>
<option value="Under Review">Review</option>
<option value="CEO Approval">CEO</option>
<option value="With Accounts">Accounts</option>
</select>
<div class="notes-checkbox">
<input checked="" id="includeNotes" type="checkbox"/>
<label for="includeNotes">Include Notes</label>
</div>
<button class="btn btn-primary generate-btn" onclick="generateReport()">
<i class="fas fa-calculator"></i>
<span class="btn-text">Generate</span>
</button>
<button class="btn clear-search-btn" onclick="clearReportSearch()">
<i class="fas fa-times"></i>
</button>
</div>
<div class="report-header" id="reportHeader"></div>
<div class="financial-summary">
<div class="financial-summary-header">
<h3>Financial Summary</h3>
</div>
<div class="financial-summary-item" id="poTotalContainer">
<span class="financial-summary-label">PO Value</span>
<span class="financial-summary-value" id="poTotal">0.00</span>
</div>
<div class="financial-summary-item">
<span class="financial-summary-label">Total Amount</span>
<span class="financial-summary-value" id="grandTotal">0.00</span>
</div>
<div class="financial-summary-item">
<span class="financial-summary-label">With Accounts</span>
<span class="financial-summary-value" id="accountsTotal">0.00</span>
</div>
<div class="financial-summary-item">
<span class="financial-summary-label">Balance</span>
<span class="financial-summary-value balance" id="balanceTotal">0.00</span>
</div>
</div>
<div class="table-responsive">
<table class="compact-table" id="reportTable">
<thead>
<tr>
<th>ID</th>
<th>PO</th>
<th>Vendor</th>
<th>Invoice</th>
<th>Amount</th>
<th>Release</th>
<th>Status</th>
<th class="notes-column">Notes</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr>
<td class="total-row" colspan="4">Total</td>
<td class="total-row numeric" id="reportTotalAmount">0.00</td>
<td colspan="3"></td>
</tr>
</tfoot>
</table>
</div>
<div class="report-actions">
<button class="btn btn-primary" onclick="printReport()">
<i class="fas fa-print"></i> <span class="btn-text">Print</span>
</button>
<button class="btn btn-success" onclick="shareReportViaWhatsApp()">
<i class="fab fa-whatsapp"></i> <span class="btn-text">Share</span>
</button>
</div>
</div>
<!-- Petty Cash Section -->
<div class="content-section" id="pettyCashSection">
<div class="section-header">
<h1>Petty Cash Summary</h1>
<button class="btn btn-primary back-btn" onclick="showSection('invoiceSection')" style="display:none;">
<i class="fas fa-arrow-left"></i> <span class="btn-text">Back</span>
</button>
</div>
<div class="search-container">
<input class="search-input" id="pettyCashSearchTerm" list="noteSuggestions" placeholder="Search by note..." type="text"/>
<datalist id="noteSuggestions"></datalist>
<button class="btn btn-primary search-btn" onclick="generatePettyCashReport()">
<i class="fas fa-search"></i> <span class="btn-text">Search</span>
</button>
<button class="btn clear-search-btn" onclick="clearPettyCashSearch()">
<i class="fas fa-times"></i>
</button>
</div>
<div class="financial-summary">
<div class="financial-summary-header">
<h3>Summary</h3>
</div>
<div class="financial-summary-item">
<span class="financial-summary-label">Total Amount</span>
<span class="financial-summary-value" id="pettyCashTotal">0.00</span>
</div>
<div class="financial-summary-item">
<span class="financial-summary-label">Records</span>
<span class="financial-summary-value" id="pettyCashCount">0</span>
</div>
</div>
<div class="table-responsive">
<table class="compact-table" id="pettyCashTable">
<thead>
<tr>
<th>ID</th>
<th>PO</th>
<th>Site</th>
<th>Vendor</th>
<th>Amount</th>
<th>Status</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr>
<td class="total-row" colspan="4">Total</td>
<td class="total-row numeric" id="pettyCashTableTotal">0.00</td>
<td></td>
</tr>
</tfoot>
</table>
</div>
<div class="report-actions">
<button class="btn btn-primary" onclick="printPettyCashReport()">
<i class="fas fa-print"></i> <span class="btn-text">Print</span>
</button>
<button class="btn btn-success" onclick="sharePettyCashViaWhatsApp()">
<i class="fab fa-whatsapp"></i> <span class="btn-text">Share</span>
</button>
</div>
</div>
<!-- Data Management Section -->
<div class="content-section" id="dataManagementSection">
<div class="section-header">
<h1>Data Management</h1>
<button class="btn btn-primary back-btn" onclick="showSection('mainPageSection')" style="display:none;">
<i class="fas fa-arrow-left"></i> <span class="btn-text">Back</span>
</button>
</div>
<div class="data-management-grid">
<!-- Approver Master (Upload & Template) -->
<div class="management-card upload-card">
<h2>Approver List</h2>
<div class="file-input-container">
<label class="file-input-label" for="approverCsvInput">
<i class="fas fa-file-csv"></i> Choose Approver CSV
    </label>
<input accept=".csv" class="file-input" id="approverCsvInput" type="file"/>
</div>
<button class="btn btn-primary" id="uploadApproverBtn" onclick="uploadApproverCSV()">
<i class="fas fa-upload"></i> Upload Approver CSV
  </button>
<div class="upload-status" id="approverUploadStatus"></div>
<a class="template-download" href="#" onclick="downloadApproverTemplate()">
<i class="fas fa-download"></i> Download Approver CSV Template
  </a>
<p style="margin-top:8px;font-size:13px;color:#666">Headers: <b>Name, Position, Mobile Number, Email</b> (Email optional)</p>
</div>
<!-- Admin Authentication Section -->
<div class="management-card auth-card"> <div class="auth-strip-title"><i class="fas fa-lock"></i><span>Admin Authentication</span></div> <button class="btn btn-secondary back-inline" onclick="showSection('mainPageSection')"> <i class="fas fa-arrow-left"></i> Back  </button> <button class="btn btn-danger" id="logoutBtn" onclick="logout()" style="display: none;">Logout</button> <div class="login-info" id="loginInfo"><strong id="loggedInAs" style="display:none;"></strong></div> <input class="auth-input" id="emailInput" placeholder="Admin Email" type="email"/> <input class="auth-input" id="passwordInput" placeholder="Password" type="password"/> <button class="btn btn-primary" id="loginBtn" onclick="login()">Sign in</button> <div class="auth-message" id="authMessage"></div></div>
<!-- Upload CSV Data -->
<div class="management-card upload-card">
<h2><i class="fas fa-file-upload"></i> Upload CSV Data</h2>
<div class="year-selector">
<label class="year-option">
<input checked="" name="uploadYear" type="radio" value="2025"/>
<span class="year-text">2025 Data</span>
</label>
<label class="year-option">
<input name="uploadYear" type="radio" value="2022-2024"/>
<span class="year-text">2022-2024 Data</span>
</label>
</div>
<div class="file-input-container">
<label class="file-input-label" for="csvFileInput">
<i class="fas fa-file-csv"></i> Choose CSV File
                        </label>
<input accept=".csv" class="file-input" id="csvFileInput" type="file"/>
</div>
<button class="btn btn-primary" disabled="" id="uploadBtn" onclick="uploadCSV()">
<i class="fas fa-upload"></i> Upload CSV
                    </button>
<div class="upload-status" id="uploadStatus"></div>
<a class="template-download" href="#" onclick="downloadTemplate()">
<i class="fas fa-download"></i> Download CSV Template
                    </a>
</div>
<!-- Manage Data -->
<div class="management-card manage-card">
<h2><i class="fas fa-database"></i> Manage Data</h2>
<div class="year-selector">
<label class="year-option">
<input checked="" name="manageYear" type="radio" value="2025"/>
<span class="year-text">2025 Data</span>
</label>
<label class="year-option">
<input name="manageYear" type="radio" value="2022-2024"/>
<span class="year-text">2022-2024 Data</span>
</label>
</div>
<button class="btn btn-danger" disabled="" id="clearDataBtn" onclick="clearFirebaseData()">
<i class="fas fa-trash"></i> Clear Data
                    </button>
<div class="upload-status" id="manageStatus"></div>
</div>
</div>
<div class="current-data-info">
<h2>Current Data Information</h2>
<div class="storage-info" id="currentDataInfo">
<strong>Current Year:</strong> <span id="currentYearDisplay">2025</span><br/>
<strong>Record Count:</strong> <span id="recordCount">0</span><br/>
<strong>Last Updated:</strong> <span id="lastUpdated">Never</span>
</div>
</div>
</div>
</div>
<!-- Invoice Preview Modal -->
<div class="modal" id="invoicePreviewModal">
<div class="modal-content">
<span class="close-modal" onclick="closeInvoicePreview()">×</span>
<h2 id="invoiceModalTitle">Invoice Details</h2>
<div class="preview-details">
<div class="detail-row">
<span class="detail-label">Vendor:</span>
<span class="detail-value" id="previewVendor"></span>
</div>
<div class="detail-row">
<span class="detail-label">PO Number:</span>
<span class="detail-value" id="previewPoNumber"></span>
</div>
<div class="detail-row">
<span class="detail-label">Invoice Number:</span>
<span class="detail-value" id="previewInvoiceNumber"></span>
</div>
<div class="detail-row">
<span class="detail-label">Amount:</span>
<span class="detail-value" id="previewAmount"></span>
</div>
<div class="detail-row">
<span class="detail-label">Status:</span>
<span class="detail-value" id="previewStatus"></span>
</div>
<div class="detail-row">
<span class="detail-label">Release Date:</span>
<span class="detail-value" id="previewReleaseDate"></span>
</div>
<div class="detail-row">
<span class="detail-label">Notes:</span>
<span class="detail-value" id="previewNotes"></span>
</div>
</div>
<div class="step-progress-container">
<div class="step-progress">
<div class="step step-1"></div>
<div class="step-connector"></div>
<div class="step step-2"></div>
<div class="step-connector"></div>
<div class="step step-3"></div>
<div class="step-connector"></div>
<div class="step step-4"></div>
<div class="step-connector"></div>
<div class="step step-5"></div>
</div>
<div class="step-labels">
<span class="step-label">SRV</span>
<span class="step-label">IPC/Report</span>
<span class="step-label">Review</span>
<span class="step-label">CEO</span>
<span class="step-label">Accounts</span>
</div>
</div>
<div class="progress-legend">
<div class="legend-description">
<p><strong>Invoice Progress Legend:</strong></p>
<ul>
<li><strong>SRV:</strong> Stock Receipt Voucher</li>
<li><strong>IPC/Report:</strong> Interim Payment Certificate/Accounts Report</li>
<li><strong>Review:</strong> Under Management Review</li>
<li><strong>CEO:</strong> Awaiting CEO Approval</li>
<li><strong>Accounts:</strong> Processed by Accounts Department</li>
</ul>
</div>
</div>
<div class="action-btns" style="margin-top: 20px; justify-content: center;">
<button class="btn btn-success" id="whatsappReminderBtn">
<i class="fab fa-whatsapp"></i> Messgae HO
    </button>
<button class="btn btn-success" id="whatsappSiteReminderBtn" style="background-color: #25D366;">
<i class="fab fa-whatsapp"></i> Message Site
    </button>
</div>
</div>
</div>
<!-- Dashboard Preview Modal -->
<div class="modal" id="dashboardPreviewModal">
<div class="modal-content">
<span class="close-modal" onclick="closeDashboardPreview()">×</span>
<h2 id="invoiceModalTitle">Invoice Details</h2>
<div class="preview-details">
<div class="detail-row">
<span class="detail-label">Vendor:</span>
<span class="detail-value" id="dashboardPreviewVendor"></span>
</div>
<div class="detail-row">
<span class="detail-label">PO Number:</span>
<span class="detail-value" id="dashboardPreviewPoNumber"></span>
</div>
<div class="detail-row">
<span class="detail-label">Invoice Number:</span>
<span class="detail-value" id="dashboardPreviewInvoiceNumber"></span>
</div>
<div class="detail-row">
<span class="detail-label">Amount:</span>
<span class="detail-value" id="dashboardPreviewAmount"></span>
</div>
<div class="detail-row">
<span class="detail-label">Status:</span>
<span class="detail-value" id="dashboardPreviewStatus"></span>
</div>
<div class="detail-row">
<span class="detail-label">Notes:</span>
<span class="detail-value" id="dashboardPreviewNotes"></span>
</div>
</div>
<div class="step-progress-container">
<div class="step-progress">
<div class="step step-1"></div>
<div class="step-connector"></div>
<div class="step step-2"></div>
<div class="step-connector"></div>
<div class="step step-3"></div>
<div class="step-connector"></div>
<div class="step step-4"></div>
<div class="step-connector"></div>
<div class="step step-5"></div>
</div>
<div class="step-labels">
<span class="step-label">SRV</span>
<span class="step-label">IPC/Report</span>
<span class="step-label">Review</span>
<span class="step-label">CEO</span>
<span class="step-label">Accounts</span>
</div>
</div>
<div class="action-btns" style="margin-top: 20px; justify-content: center;">
<button class="btn btn-primary" id="dashboardViewInTrackerBtn" style="margin-right: 10px;">
<i class="fas fa-search"></i> View in Tracker
    </button>
<button class="btn btn-success" id="dashboardWhatsappHOReminderBtn">
<i class="fab fa-whatsapp"></i> Messagen HO
    </button>
<button class="btn btn-success" id="dashboardWhatsappSiteReminderBtn" style="background-color: #25D366;">
<i class="fab fa-whatsapp"></i> Message Site
    </button>
</div>
</div>
</div>
<!-- Collection Modal -->
<div class="modal" id="collectionModal">
<div class="modal-content" style="width: 95%; max-width: 1200px; max-height: 90vh;">
<span class="close-modal" onclick="closeCollectionModal()">×</span>
<h2 style="font-size: 1.8rem; margin-bottom: 20px;">Invoice Collection</h2>
<div class="collection-info" style="display: flex; justify-content: space-between; margin-bottom: 25px;">
<div class="info-item" style="flex: 1; margin: 0 10px;">
<span class="info-label" style="font-size: 1.2rem;">Total Items:</span>
<span class="info-value" id="collectionCount" style="font-size: 1.5rem; font-weight: bold;">0</span>
</div>
<div class="info-item" style="flex: 1; margin: 0 10px;">
<span class="info-label" style="font-size: 1.2rem;">Total Amount:</span>
<span class="info-value" id="collectionTotalAmount" style="font-size: 1.5rem; font-weight: bold;">0.00</span>
</div>
</div>
<div class="collection-actions" style="display: flex; justify-content: center; gap: 20px; margin-bottom: 25px;">
<button class="btn btn-primary" onclick="printCollection()" style="padding: 12px 24px; font-size: 1.1rem;">
<i class="fas fa-print"></i> Print Collection
            </button>
<button class="btn btn-danger" onclick="clearCollection()" style="padding: 12px 24px; font-size: 1.1rem;">
<i class="fas fa-trash"></i> Clear Collection
            </button>
</div>
<div class="table-responsive" style="max-height: 60vh; overflow-y: auto;">
<table id="collectionTable" style="width: 100%; font-size: 1rem;">
<thead>
<tr>
<th style="padding: 15px; min-width: 50px;">ID</th>
<th style="padding: 15px; min-width: 120px;">Release Date</th>
<th style="padding: 15px; min-width: 100px;">Site</th>
<th style="padding: 15px; min-width: 150px;">PO</th>
<th style="padding: 15px; min-width: 200px;">Vendor</th>
<th style="padding: 15px; min-width: 150px;">Invoice</th>
<th style="padding: 15px; min-width: 120px;">Amount</th>
<th style="padding: 15px; min-width: 120px;">Status</th>
<th style="padding: 15px; min-width: 250px;">Note</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>
<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
<div class="loading-content">
<div class="corporate-spinner"></div>
<h3>Loading Data...</h3>
<p>Please wait while we process your request</p>
</div>
</div>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
<script>
// Register Chart.js plugins if present
if (window.Chart && window.ChartDataLabels) { Chart.register(window.ChartDataLabels); }
</script>
<script src="app.js"></script>
<!-- Send Approval Modal -->
<div class="modal" id="approvalModal">
<div class="modal-content">
<span class="close-modal" onclick="closeApprovalModal()">×</span>
<h2>Send Approval via WhatsApp</h2>
<div class="preview-details">
<div class="detail-row"><span class="detail-label">Site:</span><span class="detail-value" id="apprSite"></span></div>
<div class="detail-row"><span class="detail-label">PO Number:</span><span class="detail-value" id="apprPO"></span></div>
<div class="detail-row"><span class="detail-label">Vendor:</span><span class="detail-value" id="apprVendor"></span></div>
<div class="detail-row"><span class="detail-label">Amount:</span><span class="detail-value" id="apprAmount"></span></div>
</div>
<div style="margin:12px 0">
<label class="detail-label" for="approverSelect" style="display:block;margin-bottom:6px;">Send to Approver</label>
<select class="auth-input" id="approverSelect"></select>
<small style="display:block;margin-top:6px;color:#666">Approver list is loaded from Firebase → <b>Approver</b></small>
</div>
<div style="margin:12px 0">
<label class="detail-label" for="approvalMessage" style="display:block;margin-bottom:6px;">Optional Message</label>
<textarea class="auth-input" id="approvalMessage" placeholder="Add a short note (optional)" rows="3"></textarea>
</div>
<div class="action-btns" style="margin-top: 12px; justify-content:center;">
<button class="btn btn-success" id="sendApprovalBtn">
<i class="fab fa-whatsapp"></i> Send via WhatsApp
      </button>
</div>
</div>
</div>
<!-- Bottom App Nav (fixed, always visible) -->
<nav aria-label="Primary" class="bottom-app-nav" id="bottomAppNav">
<button class="nav-btn" data-target="mainPageSection" onclick="handleBottomNav(this)">
<i class="fas fa-home"></i><span>Home</span>
</button>
<button class="nav-btn" data-target="invoiceSection" onclick="handleBottomNav(this)">
<i class="fas fa-file-invoice"></i><span>Invoices</span>
</button>
<button class="nav-btn" data-target="statementSection" onclick="handleBottomNav(this)">
<i class="fas fa-list"></i><span>Statement</span>
</button>
<button class="nav-btn" onclick="openIPCFromBottom()">
<i class="fas fa-database"></i><span>IPC</span>
</button>
</nav>
</body>
</html>
